!function(){"use strict";class e{constructor(e,t,s,i,r){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s,this.id=e._id,this._handleDeleteCard=i,this._handleLikeCard=r,this._isLiked=e.isLiked||!1}getCardId(){return this.id}getIsLiked(){return this._isLiked}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeCard(this)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}setIsLiked(e){this._isLiked=e,this._renderLikes()}_renderLikes(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._renderLikes(this._likeButton),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._setEventListeners(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardElement.querySelector(".card__description-text").textContent=this._name,this._cardElement}}var t=class{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){return e.validity.valid?this._hideInputError(e):this._showInputError(e)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(e){e.classList.remove(this._inactiveButtonClass),e.disabled=!1}resetValidation(){this._toggleButtonState(this._inputEls,this._submitButton),this._inputEls.forEach((e=>{this._hideInputError(e)}))}_toggleButtonState(e,t){this._hasValidInput(e)?this._enableButton(this._submitButton):this.disableButton()}_hasValidInput(e){return e.every((e=>e.validity.valid))}_setEventListeners(){this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(this._inputEls,this._submitButton),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState(this._inputEls,this._submitButton)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=document.querySelector(".modal__close-button"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_open")||e.target.classList.contains("modal__close-button"))&&this.close()}))}}class i extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=Array.from(this._popupForm.querySelectorAll(".modal__input")),this._submitButton=this._popupForm.querySelector(".modal__save-button")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}showLoading(e){this._submitButton.textContent=e?"Loading...":"Save"}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset(),this.close()}))}}const r=document.querySelector(".profile__edit-button"),n=(document.querySelector("#profile-edit-modal"),document.querySelector(".profile__title")),o=document.querySelector(".profile__description"),a=(document.querySelector(".modal__input_type_name"),document.querySelector(".modal__input_type_description"),document.querySelector(".cards__list"),document.querySelector(".profile__add-button")),l=(document.querySelector("#newcards"),document.querySelector(".modal__input_type_title"),document.querySelector(".modal__input_type_link"),{}),d=document.querySelector("#profilePicture"),c=new class extends s{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._previewImage=this._popupElement.querySelector(".modal__image-preview"),this._previewImageTitle=this._popupElement.querySelector(".modal__title-preview")}open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._previewImage.src=t,this._previewImage.alt=e,this._previewImageTitle.textContent=e,super.open()}}({popupSelector:"#preview"});c.setEventListeners();const h=new i("#profile-edit-modal",(function(e){h.showLoading(!0),m.editUserData({name:e.name,description:e.description}).catch((e=>{console.error(e)})).finally((()=>{h.showLoading(!1)})),L.setUserInfo(e),h.close()}));h.setEventListeners();const _=new i("#newcards",(function(e){_.showLoading(!0),m.addNewCard(e).then((e=>{E(e)})).catch((e=>{console.error(e)})).finally((()=>{_.showLoading(!1)})),l["newcard-form"].disableButton()}));_.setEventListeners();const u=new i("#pfpEdit",(function(e){u.showLoading(!0),m.editPfp(e).then((e=>{L.setUserPfp({avatar:e.avatar})})).catch((e=>{console.error(e)})).finally((()=>{u.showLoading(!1)})),l["pfp-editor"].disableButton()}));u.setEventListeners();const p=new class extends s{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupElement.querySelector(".modal__save-button")}handleConfirm(e){this._handleConfirmSubmit=e}open(e,t){this._currentCard=e,this._cardId=t,super.open()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleConfirmSubmit()}))}showLoading(e){this._submitButton.textContent=e?"Loading...":"YES"}}("#confirm");p.setEventListeners();const m=new class{constructor(e){let{baseUrl:t,headers:s}=e;this.baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserData(){return fetch(`${this.baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}editUserData(e){return fetch(`${this.baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.description})}).then(this._checkResponse)}editPfp(e){return fetch(`${this.baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then(this._checkResponse)}getInitialCards(){return fetch(`${this.baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}addNewCard(e){return fetch(`${this.baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}addLike(e){return fetch(`${this.baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}removeLike(e){return fetch(`${this.baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}deleteCard(e){return fetch(`${this.baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"8d3dab07-3d12-4401-9299-225a306c1793","Content-Type":"application/json"}});function E(t){const s=new e(t,"#jscard-template",S,f,b).getView();v.addItem(s)}m.getInitialCards().then((e=>(console.log("Fetched Cards:",e),e.map((e=>({name:e.name,link:e.link,_id:e._id,isLiked:e.isLiked})))))).catch((e=>(console.error(e),[]))).then((e=>{const t=e.map((e=>E(e)));v.renderItems(t)})).catch((e=>{console.error(e)}));const v=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._element=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._element.prepend(e)}}({items:[],renderer:E},".cards__list"),L=new class{constructor(e,t,s){this._displayedName=e,this._displayedDescription=t,this._pfpElement=s}getUserInfo(){return{name:this._displayedName.textContent,description:this._displayedDescription.textContent}}setUserInfo(e){this._displayedName.textContent=e.name,this._displayedDescription.textContent=e.description}setUserPfp(e){this._pfpElement.src=e.avatar}}(n,o,d);function f(e){p.open(),p.handleConfirm((()=>{p.showLoading(!0),m.deleteCard(e.getCardId()).then((()=>{e.handleDeleteCard(),p.close()})).catch((e=>{console.error(e)})).finally((()=>{p.showLoading(!1)}))}))}function S(e,t){c.open(e,t)}function b(e){e.getIsLiked()?m.removeLike(e.getCardId()).then((()=>{e.setIsLiked(!1)})).catch((e=>{console.error(e)})):m.addLike(e.getCardId()).then((()=>{e.setIsLiked(!0)})).catch(console.error)}var y;v.renderItems(),m.getUserData().then((e=>{console.log(e),L.setUserInfo({name:e.name,description:e.about}),L.setUserPfp({avatar:e.avatar})})).catch((e=>{console.error(e)})),r.addEventListener("click",(()=>{const e=L.getUserInfo();h.setInputValues(e),l["profile-form"].resetValidation(),h.open()})),a.addEventListener("click",(()=>{_.open()})),d.addEventListener("click",(()=>{u.open()})),y={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(y.formSelector)).forEach((e=>{const s=new t(y,e),i=e.getAttribute("id");l[i]=s,s.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTQyxZQUFZLENBQUUvSCxLQUFNbUksRUFBSW5JLEtBQU13SCxZQUFhVyxFQUFJNkIsUUFDeERsQyxFQUFTUyxXQUFXLENBQUVDLE9BQVFMLEVBQUlLLFFBQVMsSUFFNUNmLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksSUFNdEJsQixFQUFlekYsaUJBQWlCLFNBQVMsS0FDdkMsTUFBTThLLEVBQU8vRCxFQUFTOEQsY0FDdEJ4RSxFQUFhaEIsZUFBZXlGLEdBQzVCakYsRUFBZSxnQkFBZ0IvQyxrQkFDL0J1RCxFQUFhcEMsTUFBTSxJQUdyQjJCLEVBQVc1RixpQkFBaUIsU0FBUyxLQUNuQ2lILEVBQWFoRCxNQUFNLElBR3JCNkIsRUFBSTlGLGlCQUFpQixTQUFTLEtBQzVCc0gsRUFBUXJELE1BQU0sSUFpR1UvQyxFRDdMSixDQUNwQkcsYUFBYyxlQUNkRSxjQUFlLGdCQUNmRSxxQkFBc0Isc0JBQ3RCRSxvQkFBcUIsOEJBQ3JCRSxnQkFBaUIsMEJBQ2pCRSxXQUFZLHdCQ3dMS2dELE1BQU1DLEtBQUt0RSxTQUFTMkMsaUJBQWlCbkMsRUFBT0csZUFDcEQ0QixTQUFTOUIsSUFDaEIsTUFBTTRKLEVBQVksSUFBSUMsRUFBYzlKLEVBQVFDLEdBQ3RDOEosRUFBVzlKLEVBQVkrSixhQUFhLE1BQzFDckYsRUFBZW9GLEdBQVlGLEVBQzNCQSxFQUFVdkgsa0JBQWtCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZGF0YSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDYXJkLFxyXG4gICAgaGFuZGxlTGlrZUNhcmRcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLmlkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gaGFuZGxlTGlrZUNhcmQ7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gZGF0YS5pc0xpa2VkIHx8IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaWQ7XHJcbiAgfVxyXG5cclxuICBnZXRJc0xpa2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIHNldElzTGlrZWQoaXNMaWtlZCkge1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2VzKCkge1xyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIC8vZ2V0IGNhcmQgdmlld1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcyh0aGlzLl9saWtlQnV0dG9uKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICAvL3NldCBldmVudCBsaXN0ZW5lcnNcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZXNjcmlwdGlvbi10ZXh0XCIpLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fbmFtZTtcclxuICAgIC8vcmV0dXJuIHRoZSBjYXJkXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVCdXR0b24oYnV0dG9uKSB7XHJcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRFbHMsIHRoaXMuX3N1Ym1pdEJ1dHRvbik7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgX3N1Ym1pdEJ1dHRvbikge1xyXG4gICAgaWYgKHRoaXMuX2hhc1ZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24odGhpcy5fc3VibWl0QnV0dG9uKTtcclxuICAgIH0gZWxzZSB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIF9oYXNWYWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5ldmVyeSgoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dEVscywgdGhpcy5fc3VibWl0QnV0dG9uKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dEVscywgdGhpcy5fc3VibWl0QnV0dG9uKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5cIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAvL29wZW5zXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIC8vY2xvc2VcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5cIikgfHxcclxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ1dHRvblwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzaG93TG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJMb2FkaW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbi8vIEVsZW1lbnRzXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX25hbWVcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5leHBvcnQgY29uc3QgY2FyZEFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IG5ld0NhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3Y2FyZHNcIik7XHJcbmV4cG9ydCBjb25zdCBuZXdDYXJkTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV90aXRsZVwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBuZXdDYXJkTGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV9saW5rXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgY2FyZFNlY3Rpb246IFwiLmNhcmRzX19saXN0XCIsXHJcbiAgY2FyZFRlbXBsYXRlOiBcIiNqc2NhcmQtdGVtcGxhdGVcIixcclxufTtcclxuZXhwb3J0IGNvbnN0IHBmcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZVBpY3R1cmVcIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkRGF0YSA9IHtcclxuICBuYW1lOiBcIkNhcmQgTmFtZVwiLFxyXG4gIGxpbms6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIixcclxuICBpZDogXCJjYXJkMTIzXCIsXHJcbn07XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGNvbmZpZyxcclxuICBwcm9maWxlRWRpdEJ0bixcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgY2FyZEFkZEJ0bixcclxuICBmb3JtVmFsaWRhdG9ycyxcclxuICBzZWxlY3RvcnMsXHJcbiAgcGZwLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1cIjtcclxuXHJcbi8vRWxlbWVudHNcclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7IHBvcHVwU2VsZWN0b3I6IFwiI3ByZXZpZXdcIiB9KTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBlZGl0UHJvZmlsZVN1Ym1pdFxyXG4pO1xyXG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbmV3Y2FyZHNcIiwgYWRkTmV3Q2FyZFN1Ym1pdCk7XHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBFZGl0UGZwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcGZwRWRpdFwiLCBlZGl0UGZwU3VibWl0KTtcclxuRWRpdFBmcC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBjb25maXJtUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybShcIiNjb25maXJtXCIpO1xyXG5jb25maXJtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiOGQzZGFiMDctM2QxMi00NDAxLTkyOTktMjI1YTMwNmMxNzkzXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbi8vaW5pdGFsaXphdGlvblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgY2FyZERhdGEsXHJcbiAgICBcIiNqc2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUNhcmRJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZCxcclxuICAgIGhhbmRsZUxpa2VDYXJkXHJcbiAgKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2V0VmlldygpO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYXJkTGlzdERhdGEoKSB7XHJcbiAgcmV0dXJuIGFwaVxyXG4gICAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRmV0Y2hlZCBDYXJkczpcIiwgcmVzKTtcclxuICAgICAgcmV0dXJuIHJlcy5tYXAoKGNhcmQpID0+ICh7XHJcbiAgICAgICAgbmFtZTogY2FyZC5uYW1lLFxyXG4gICAgICAgIGxpbms6IGNhcmQubGluayxcclxuICAgICAgICBfaWQ6IGNhcmQuX2lkLFxyXG4gICAgICAgIGlzTGlrZWQ6IGNhcmQuaXNMaWtlZCxcclxuICAgICAgfSkpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmNhcmRMaXN0RGF0YSgpXHJcbiAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZGF0YS5tYXAoKGNhcmREYXRhKSA9PiBjcmVhdGVDYXJkKGNhcmREYXRhKSk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkRWxlbWVudCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogW10sXHJcbiAgICByZW5kZXJlcjogY3JlYXRlQ2FyZCxcclxuICB9LFxyXG4gIHNlbGVjdG9ycy5jYXJkU2VjdGlvblxyXG4pO1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uLCBwZnApO1xyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuYXBpXHJcbiAgLmdldFVzZXJEYXRhKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiByZXMubmFtZSwgZGVzY3JpcHRpb246IHJlcy5hYm91dCB9KTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJQZnAoeyBhdmF0YXI6IHJlcy5hdmF0YXIgfSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuLy9yZW5kZXIgbmV3Y2FyZHNcclxuXHJcbi8vIEV2ZW50IExpc3RlbmVyc1xyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IGluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVQb3B1cC5zZXRJbnB1dFZhbHVlcyhpbmZvKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcInByb2ZpbGUtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBwcm9maWxlUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmNhcmRBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbnBmcC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIEVkaXRQZnAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vSGFuZGxlclxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKGNhcmQpIHtcclxuICBjb25maXJtUG9wdXAub3BlbigpO1xyXG4gIGNvbmZpcm1Qb3B1cC5oYW5kbGVDb25maXJtKCgpID0+IHtcclxuICAgIGNvbmZpcm1Qb3B1cC5zaG93TG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkLmdldENhcmRJZCgpKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgICAgY29uZmlybVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgY29uZmlybVBvcHVwLnNob3dMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVkaXRQcm9maWxlU3VibWl0KHVzZXJEYXRhKSB7XHJcbiAgcHJvZmlsZVBvcHVwLnNob3dMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmVkaXRVc2VyRGF0YSh7XHJcbiAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB1c2VyRGF0YS5kZXNjcmlwdGlvbixcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlUG9wdXAuc2hvd0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gIHByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlZGl0UGZwU3VibWl0KHVzZXJEYXRhKSB7XHJcbiAgRWRpdFBmcC5zaG93TG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5lZGl0UGZwKHVzZXJEYXRhKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VyUGZwKHsgYXZhdGFyOiByZXMuYXZhdGFyIH0pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIEVkaXRQZnAuc2hvd0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJwZnAtZWRpdG9yXCJdLmRpc2FibGVCdXR0b24oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkTmV3Q2FyZFN1Ym1pdChkYXRhKSB7XHJcbiAgbmV3Q2FyZFBvcHVwLnNob3dMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmFkZE5ld0NhcmQoZGF0YSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHJlcyk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgbmV3Q2FyZFBvcHVwLnNob3dMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wibmV3Y2FyZC1mb3JtXCJdLmRpc2FibGVCdXR0b24oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEltYWdlQ2xpY2sobmFtZSwgbGluaykge1xyXG4gIGltYWdlUG9wdXAub3BlbihuYW1lLCBsaW5rKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUNhcmQoY2FyZCkge1xyXG4gIGlmIChjYXJkLmdldElzTGlrZWQoKSkge1xyXG4gICAgYXBpXHJcbiAgICAgIC5yZW1vdmVMaWtlKGNhcmQuZ2V0Q2FyZElkKCkpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLnNldElzTGlrZWQoZmFsc2UpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFwaVxyXG4gICAgICAuYWRkTGlrZShjYXJkLmdldENhcmRJZCgpKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5zZXRJc0xpa2VkKHRydWUpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG4vL3ZhbGlkYXRpb25cclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2ltYWdlLXByZXZpZXdcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX190aXRsZS1wcmV2aWV3XCJcclxuICAgICk7XHJcbiAgfVxyXG4gIG9wZW4obmFtZSA9IFwiXCIsIGxpbmsgPSBcIlwiKSB7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fc2F2ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNvbmZpcm0oYXBpQ2xpY2spIHtcclxuICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1TdWJtaXQgPSBhcGlDbGljaztcclxuICB9XHJcblxyXG4gIG9wZW4oY3VycmVudENhcmQsIGNhcmRJZCkge1xyXG4gICAgdGhpcy5fY3VycmVudENhcmQgPSBjdXJyZW50Q2FyZDtcclxuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmRJZDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1TdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2hvd0xvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiTG9hZGluZy4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJZRVNcIjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgLy8gY29uc3RydWN0b3IgYm9keVxyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckRhdGEoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGVkaXRVc2VyRGF0YSh1c2VyRGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcclxuICAgICAgICBhYm91dDogdXNlckRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGVkaXRQZnAodXNlckRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiB1c2VyRGF0YS5saW5rIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZChjYXJkRGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxyXG4gICAgICAgIGxpbms6IGNhcmREYXRhLmxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkRGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkRGF0YX1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgICAvL2NyZWF0ZSBlbGVtZW50cyB0byByZW5kZXJcclxuICB9XHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICAvLyBhZGQgaXRlbSBpbnRvIHRoaXMuX2VsZW1lbnRcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHByb2ZpbGVOYW1lLCBwcm9maWxlRGVzY3JpcHRpb24sIHBmcFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9kaXNwbGF5ZWROYW1lID0gcHJvZmlsZU5hbWU7XHJcbiAgICB0aGlzLl9kaXNwbGF5ZWREZXNjcmlwdGlvbiA9IHByb2ZpbGVEZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuX3BmcEVsZW1lbnQgPSBwZnBTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fZGlzcGxheWVkTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rpc3BsYXllZERlc2NyaXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XHJcbiAgICB0aGlzLl9kaXNwbGF5ZWROYW1lLnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZTtcclxuICAgIHRoaXMuX2Rpc3BsYXllZERlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlckRhdGEuZGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyUGZwKHVzZXJEYXRhKSB7XHJcbiAgICB0aGlzLl9wZnBFbGVtZW50LnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImhhbmRsZUxpa2VDYXJkIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsImlkIiwiX2lkIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfaGFuZGxlTGlrZUNhcmQiLCJfaXNMaWtlZCIsImlzTGlrZWQiLCJnZXRDYXJkSWQiLCJnZXRJc0xpa2VkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJzZXRJc0xpa2VkIiwiX3JlbmRlckxpa2VzIiwiY2xhc3NMaXN0IiwiYWRkIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImRpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiYnV0dG9uIiwicmVzZXRWYWxpZGF0aW9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lucHV0RWxzIiwiZm9yRWFjaCIsImlucHV0TGlzdCIsIl9oYXNWYWxpZElucHV0IiwiZXZlcnkiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRFbCIsImV2dCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJzaG93TG9hZGluZyIsImlzTG9hZGluZyIsInJlc2V0IiwicHJvZmlsZUVkaXRCdG4iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsImNhcmRBZGRCdG4iLCJmb3JtVmFsaWRhdG9ycyIsInBmcCIsImltYWdlUG9wdXAiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdJbWFnZVRpdGxlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicHJvZmlsZVBvcHVwIiwidXNlckRhdGEiLCJhcGkiLCJlZGl0VXNlckRhdGEiLCJkZXNjcmlwdGlvbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZmluYWxseSIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJuZXdDYXJkUG9wdXAiLCJhZGROZXdDYXJkIiwidGhlbiIsInJlcyIsImNyZWF0ZUNhcmQiLCJFZGl0UGZwIiwiZWRpdFBmcCIsInNldFVzZXJQZnAiLCJhdmF0YXIiLCJjb25maXJtUG9wdXAiLCJoYW5kbGVDb25maXJtIiwiYXBpQ2xpY2siLCJfaGFuZGxlQ29uZmlybVN1Ym1pdCIsImN1cnJlbnRDYXJkIiwiY2FyZElkIiwiX2N1cnJlbnRDYXJkIiwiX2NhcmRJZCIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VyRGF0YSIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImdldEluaXRpYWxDYXJkcyIsImNhcmREYXRhIiwiYWRkTGlrZSIsInJlbW92ZUxpa2UiLCJkZWxldGVDYXJkIiwiYXV0aG9yaXphdGlvbiIsImNhcmRFbGVtZW50IiwiaGFuZGxlQ2FyZEltYWdlQ2xpY2siLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJsb2ciLCJtYXAiLCJjYXJkIiwicmVuZGVySXRlbXMiLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfZWxlbWVudCIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInBmcFNlbGVjdG9yIiwiX2Rpc3BsYXllZE5hbWUiLCJfZGlzcGxheWVkRGVzY3JpcHRpb24iLCJfcGZwRWxlbWVudCIsImdldFVzZXJJbmZvIiwiaW5mbyIsInZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=